/**
 * jscript - Not another JavaScript playground
 * @version v1.0.0
 * @link https://github.com/thibaudbe/jscript
 * @author Thibaud B. <contact@thibaudb.com
 * @license MIT
 */
"use strict";var data={title:"Demo",description:"This is a sample demo.",reset:!1,sass:!0,libraries:["http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.0/handlebars.min.js"],preview:!1,ressources:[],view:{tab1:!0,tab2:!1,tab3:!1},html:'<div class="banner">\n	<div class="avatar">\n		<div class="img"></div>\n	</div>\n</div>\n\n<div class="list">\n	<ul id="wrap"></ul>\n</div>\n',script:"var wrap = document.getElementById('wrap');\n\nfor (var i=0; i<30; i++) {\n wrap.innerHTML += '<li>item nÂ°'+ (i+1) +'</li>';\n}",style:"$orange: #F8A87C;\n\n*, ::after, ::before {\n	box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n font: 14px 'Lucida Grande',Helvetica,Arial,sans-serif;\n}\n\n.banner {\n	background: $orange;\n	margin-bottom: 80px;\n	\n	.avatar {\n		width: 100px;\n		height: 120px;\n		margin: auto;\n		position: relative;\n\n		.img {\n				position: absolute;\n				bottom: -45px;\n			width: 100px;\n			height: 100px;\n				border-radius: 50%;\n				background: no-repeat url('http://cdn.collider.com/wp-content/uploads/Dumb-and-Dumber-jim-carrey-1.jpg') center center;\n				background-size: cover;\n				border: 3px solid #fff;\n		}\n	}\n}\n\n.list {\n	margin: 20px 20px 80px;\n	\n	ul {\n		list-style-type: none;\n		padding: 0;\n		\n		li {\n				list-style-type: none;\n				padding: 10px;\n				text-align: center;\n				color: #999;\n				@extend .animate;\n				\n				&:nth-child(2n + 1) {\n				background: #efefef;\n				color: #444;\n				}\n				\n				@for $i from 1 through 30 {\n				&:nth-of-type(#{$i}) {\n					-webkit-animation-delay: #{$i * 100}ms;\n					animation-delay: #{$i * 100}ms;\n				}\n				}\n		}\n	}\n}\n\n\n.animate {\n	-webkit-animation-duration: 400ms;\n	animation-duration: 400ms;\n	-webkit-animation-fill-mode: both;\n	animation-fill-mode: both;\n	-webkit-animation-name: anim;\n	animation-name: anim;\n}\n\n@-webkit-keyframes anim {\n	from {\n		opacity: 0;\n		-webkit-transform: translate3d(-10px,0,0);\n		transform: translate3d(-10px,0,0);\n	}\n	to {\n		opacity: 1;\n		-webkit-transform: translate3d(0,0,0);\n		transform: translate3d(0,0,0);\n	}\n}\n\n@keyframes anim {\n	from {\n		opacity: 0;\n		-webkit-transform: translate3d(-10px,0,0);\n		transform: translate3d(-10px,0,0);\n	}\n	to {\n		opacity: 1;\n		-webkit-transform: translate3d(0,0,0);\n		transform: translate3d(0,0,0);\n	}\n}\n"},api=require("api"),app=function(){var e=function(){y(data),q(),E()},t=document.querySelector("#result"),n=document.querySelector("#alertBox"),a=document.querySelector("#inputStyle"),r=document.querySelector("#inputScript"),i=document.querySelector("#inputHtml"),o=document.querySelector("#inputTitle"),c=document.querySelector("#inputDescription"),s=document.querySelector("#inputReset"),l=document.querySelector("#inputSass"),d=document.querySelector("#inputPreview"),u=document.querySelector("#libraries"),m=document.querySelector("#tab1"),p=document.querySelector("#tab2"),b=document.querySelector("#tab3"),f=(document.querySelector("#tab-content1"),document.querySelector("#tab-content2"),document.querySelector("#tab-content3"),document.querySelector("#btnRun")),h=document.querySelector("#btnSave"),v=document.querySelector("#btnShare"),y=function(e){i.value=e.html,r.value=e.script,a.value=e.style,o.value=e.title,c.value=e.description,s.checked=e.reset?!0:!1,l.checked=e.sass?!0:!1,d.checked=e.preview?!0:!1,document.title="JScript | "+o.value,e.libraries.length>0&&e.libraries.forEach(function(e){var t=e.split("/").pop(),n=document.createElement("li"),a=document.createElement("a");a.setAttribute("href",e),a.setAttribute("target","_blank"),a.innerHTML=t,n.appendChild(a);var r=document.createElement("a");r.setAttribute("class","delete"),r.setAttribute("href","#"),r.innerHTML='<i class="fa fa-minus"></i>',n.appendChild(r),u.appendChild(n)}),w(e.html,editorHtml,"html"),w(e.script,editorScript,"javascript"),w(e.style,editorStyle,"scss"),C(e)},w=function(e,t,n){var a=ace.edit(t);"html"==n&&(ace.require("ace/ext/emmet"),a.setOption("enableEmmet",!0)),a.getSession().setUseWorker(!1),a.getSession().setMode("ace/mode/"+n),a.setValue(e,-1),a.commands.addCommand({name:"Refresh",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(){g("refresh",data)}}),a.on("change",function(){k(n,a.getValue())})},k=function(e,t){switch(e){case"html":i.value=t;break;case"javascript":r.value=t;break;case"scss":a.value=t;break;default:return}d.checked&&S(data)},g=function(e,t){switch(e){case"save":x(t);break;case"refresh":S(t);break;default:return}},S=function(e){document.title="JScript | "+o.value,e.title=o.value,e.description=c.value,e.reset=s.checked?!0:!1,e.sass=l.checked?!0:!1,e.preview=d.checked?!0:!1,e.html=i.value,e.script=r.value,e.style=a.value,C(e)},x=function(e){console.log("Data post to server",e)},q=function(){data.view.tab2===!0?p.checked=!0:data.view.tab3===!0?b.checked=!0:m.checked=!0},E=function(){f.addEventListener("click",function(){return g("refresh",data),!1}),h.addEventListener("click",function(){return g("save",data),A("warning","Sorry, database is not connected"),!1}),v.addEventListener("click",function(){return A("warning","Sorry, You can't share for now, because database is not connected"),!1}),window.onbeforeunload=function(){return data.html!==i.value||data.script!==r.value||data.style!==a.value?"You are going to lost your unsave data.":void 0}},A=function(e,t){var a=document.createElement("div");a.setAttribute("class","animated2 slideDown alert alert-"+e),a.innerHTML=t;var r=document.createElement("button");r.setAttribute("class","alert__close"),a.appendChild(r),n.appendChild(a);var i,o=function(){i=setTimeout(function(){c()},8e3)};o();var c=function(){a.className="animated2 fadeOut2 alert alert-"+e;setTimeout(function(){a.remove()},400)},s=function(){clearTimeout(i)};r.addEventListener("click",function(){return s(),c(),!1}),n.children.length>3&&n.children[0].remove()},C=function(e){var n=document.querySelector("#resultFrame");n&&n.remove();var a=document.createElement("iframe");a.setAttribute("id","resultFrame"),t.appendChild(a);var r=e.html,i=a.contentWindow.document.createElement("script");if(i.setAttribute("type","text/javascript"),i.text=e.script,e.reset===!0){var o="http://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.2/normalize.min.css",c=a.contentWindow.document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("href",o),a.contentWindow.document.head.appendChild(c)}e.libraries.length>0&&e.libraries.forEach(function(e){var t=e.split(".").pop();if("js"==t){var n=a.contentWindow.document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e),a.contentWindow.document.body.appendChild(n)}else if("css"==t){var r=a.contentWindow.document.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("href",e),a.contentWindow.document.head.appendChild(c)}else A("error","Something's wrong with your file.")});var s=a.contentWindow.document.createElement("style");if(s.setAttribute("type","text/css"),e.sass===!0){var l=e.style,d=Sass.compile(l);s.innerHTML=d}else s.innerHTML=e.style;a.contentWindow.document.body.insertAdjacentHTML("beforeend",r),a.contentWindow.document.head.appendChild(s),a.contentWindow.document.body.appendChild(i)};return{init:e}}();app.init();