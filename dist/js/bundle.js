/**
 * jscript - Not another JavaScript playground
 * @version v1.0.0
 * @link https://github.com/thibaudbe/jscript
 * @author Thibaud B. <contact@thibaudb.com
 * @license MIT
 */
"use strict";var data={title:"Demo",description:"This is a sample demo.",library:!1,sass:!0,preview:!1,ressources:[],view:{tab1:!0,tab2:!1,tab3:!1},html:'<div class="banner">\n	<div class="avatar">\n		<div class="img"></div>\n	</div>\n</div>\n\n<div class="list">\n	<ul id="wrap"></ul>\n</div>\n',script:"var wrap = document.getElementById('wrap');\n\nfor (var i=0; i<30; i++) {\n wrap.innerHTML += '<li>item nÂ°'+ (i+1) +'</li>';\n}",style:"$orange: #F8A87C;\n\n*, ::after, ::before {\n	box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n font: 14px 'Lucida Grande',Helvetica,Arial,sans-serif;\n}\n\n.banner {\n	background: $orange;\n	margin-bottom: 80px;\n	\n	.avatar {\n		width: 100px;\n		height: 120px;\n		margin: auto;\n		position: relative;\n\n		.img {\n				position: absolute;\n				bottom: -45px;\n			width: 100px;\n			height: 100px;\n				border-radius: 50%;\n				background: no-repeat url('http://cdn.collider.com/wp-content/uploads/Dumb-and-Dumber-jim-carrey-1.jpg') center center;\n				background-size: cover;\n				border: 3px solid #fff;\n		}\n	}\n}\n\n.list {\n	margin: 20px 20px 80px;\n	\n	ul {\n		list-style-type: none;\n		padding: 0;\n		\n		li {\n				list-style-type: none;\n				padding: 10px;\n				text-align: center;\n				color: #999;\n				@extend .animate;\n				\n				&:nth-child(2n + 1) {\n				background: #efefef;\n				color: #444;\n				}\n				\n				@for $i from 1 through 30 {\n				&:nth-of-type(#{$i}) {\n					-webkit-animation-delay: #{$i * 100}ms;\n					animation-delay: #{$i * 100}ms;\n				}\n				}\n		}\n	}\n}\n\n\n.animate {\n	-webkit-animation-duration: 400ms;\n	animation-duration: 400ms;\n	-webkit-animation-fill-mode: both;\n	animation-fill-mode: both;\n	-webkit-animation-name: anim;\n	animation-name: anim;\n}\n\n@-webkit-keyframes anim {\n	from {\n		opacity: 0;\n		-webkit-transform: translate3d(-10px,0,0);\n		transform: translate3d(-10px,0,0);\n	}\n	to {\n		opacity: 1;\n		-webkit-transform: translate3d(0,0,0);\n		transform: translate3d(0,0,0);\n	}\n}\n\n@keyframes anim {\n	from {\n		opacity: 0;\n		-webkit-transform: translate3d(-10px,0,0);\n		transform: translate3d(-10px,0,0);\n	}\n	to {\n		opacity: 1;\n		-webkit-transform: translate3d(0,0,0);\n		transform: translate3d(0,0,0);\n	}\n}\n"},api=require("api"),app=function(){var e=function(){m(data),C(),x()},i=document.querySelector("#result"),t=document.querySelector("#alertBox"),r=document.querySelector("#inputStyle"),n=document.querySelector("#inputScript"),o=document.querySelector("#inputHtml"),a=document.querySelector("#inputTitle"),s=document.querySelector("#inputDescription"),f=document.querySelector("#inputLibrary"),l=document.querySelector("#inputSass"),u=document.querySelector("#inputPreview"),c=document.querySelector("#tab1"),h=document.querySelector("#tab2"),d=document.querySelector("#tab3"),b=(document.querySelector("#tab-content1"),document.querySelector("#tab-content2"),document.querySelector("#tab-content3"),document.querySelector("#btnRun")),g=document.querySelector("#btnSave"),k=document.querySelector("#btnShare"),m=function(e){o.value=e.html,n.value=e.script,r.value=e.style,a.value=e.title,s.value=e.description,f.checked=e.library?!0:!1,l.checked=e.sass?!0:!1,u.checked=e.preview?!0:!1,document.title="JScript | "+a.value,p(e.html,editorHtml,"html"),p(e.script,editorScript,"javascript"),p(e.style,editorStyle,"scss"),F(e)},p=function(e,i,t){var r=ace.edit(i);"html"==t&&(ace.require("ace/ext/emmet"),r.setOption("enableEmmet",!0)),r.getSession().setUseWorker(!1),r.getSession().setMode("ace/mode/"+t),r.setValue(e,-1),r.commands.addCommand({name:"Refresh",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(){w("refresh",data)}}),r.on("change",function(){v(t,r.getValue())})},v=function(e,i){switch(e){case"html":o.value=i;break;case"javascript":n.value=i;break;case"scss":r.value=i;break;default:return}u.checked&&y(data)},w=function(e,i){switch(e){case"save":A(i);break;case"refresh":y(i);break;default:return}},y=function(e){document.title="JScript | "+a.value,e.title=a.value,e.description=s.value,e.library=f.checked?!0:!1,e.sass=l.checked?!0:!1,e.preview=u.checked?!0:!1,e.html=o.value,e.script=n.value,e.style=r.value,F(e)},A=function(e){console.log("Data post to server",e)},C=function(){data.view.tab2===!0?h.checked=!0:data.view.tab3===!0?d.checked=!0:c.checked=!0},x=function(){b.addEventListener("click",function(){return w("refresh",data),!1}),g.addEventListener("click",function(){return w("save",data),E("warning","Sorry, database is not connected"),!1}),k.addEventListener("click",function(){return E("warning","Sorry, You can't share for now, because database is not connected"),!1})},E=function(e,i){var r=document.createElement("div");r.setAttribute("class","animated2 slideDown alert alert-"+e),r.innerHTML=i;var n=document.createElement("button");n.setAttribute("class","alert__close"),r.appendChild(n),t.appendChild(r);var o,a=function(){o=setTimeout(function(){s()},8e3)};a();var s=function(){r.className="animated2 fadeOut2 alert alert-"+e;setTimeout(function(){r.remove()},400)},f=function(){clearTimeout(o)};n.addEventListener("click",function(){return f(),s(),!1}),t.children.length>3&&t.children[0].remove()},F=function(e){var t=document.querySelector("#resultFrame");t&&t.remove();var r=document.createElement("iframe");r.setAttribute("id","resultFrame"),i.appendChild(r);var n=e.html,o=r.contentWindow.document.createElement("script");if(o.setAttribute("type","text/javascript"),o.text=e.script,e.library===!0){var a="http://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.2/normalize.min.css",s=r.contentWindow.document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("href",a),r.contentWindow.document.head.appendChild(s)}var f=r.contentWindow.document.createElement("style");if(f.setAttribute("type","text/css"),e.sass===!0){var l=e.style,u=Sass.compile(l);f.innerHTML=u}else f.innerHTML=e.style;r.contentWindow.document.body.insertAdjacentHTML("beforeend",n),r.contentWindow.document.head.appendChild(f),r.contentWindow.document.body.appendChild(o)};return{init:e}}();app.init();